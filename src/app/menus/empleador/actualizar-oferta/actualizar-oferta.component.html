<app-navbar-empleador></app-navbar-empleador>
<div class="container-sm mt-5 h-auto d-flex flex-column justify-content-center align-items-center"  >
    <form class=" border w-75 mb-5 rounded-top p-4 " [formGroup]="form" >
        <h5>Nombre de la oferta</h5>
        <div class="form-floating mb-3">
            <input type="text" class="form-control" 
              [class.is-invalid]="form.controls['nombre'].invalid && form.controls['nombre'].touched"
              id="nombre" placeholder="Oferta" name="nombre" formControlName="nombre">
              <div
                *ngIf="form.controls['nombre'].invalid && (form.controls['nombre'].dirty || form.controls['nombre'].touched)"
                class="invalid-feedback">
                <div>
                  Por favor ingrese el nombre de la oferta
                </div>
              </div>
            <label for="nombre">Oferta</label>
          </div>
        <h5>Descripcion</h5>
        <div class="form-floating mb-3">
            <input type="text" class="form-control" 
              [class.is-invalid]="form.controls['descripcion'].invalid && form.controls['descripcion'].touched"
              id="descripcion" placeholder="Descripcion" name="descripcion" formControlName="descripcion">
              <div
                *ngIf="form.controls['descripcion'].invalid && (form.controls['descripcion'].dirty || form.controls['descripcion'].touched)"
                class="invalid-feedback">
                <div>
                  Por favor ingrese la descripcion
                </div>
              </div>
            <label for="descripcion">Descripcion</label>
          </div>
          <h5>Categoria</h5>
          <select class="form-select" aria-label="Default select example"
          id="categoria" name="categoria" formControlName="categoria" >
            <option *ngFor="let dato of listacategorias let i = index" value={{dato.codigo}}>{{dato.nombre}}</option>
          </select>
          <h5 class="mt-3">Fecha limite aplicacion</h5>
          <div class="row row-cols-3 g-4 mb-3">
            <div class=" form-group" >
                <input type="text"
                    placeholder="Fecha"
                    class="form-control "
                    bsDatepicker
                    
                    [class.is-invalid]="form.controls['fechaLimite'].invalid && form.controls['fechaLimite'].touched"
                    id="fechaLimite"  name = "fechaLimite" formControlName="fechaLimite"
                >
                <div
                        *ngIf="form.controls['fechaLimite'].invalid && (form.controls['fechaLimite'].dirty || form.controls['fechaLimite'].touched)"
                        class="invalid-feedback">
                        <div>
                            Por favor ingrese la fecha 
                        </div>
                    </div>
            </div>
            </div>
          <h5>Salario aproximado</h5>
        <div class="form-floating mb-3">
            <input type="number" class="form-control" min="1" pattern="^[0-9]+" 
              [class.is-invalid]="form.controls['salario'].invalid && form.controls['salario'].touched"
              id="salario" placeholder="Salario" name="salario" formControlName="salario">
              <div
                *ngIf="form.controls['salario'].invalid && (form.controls['salario'].dirty || form.controls['salario'].touched)"
                class="invalid-feedback">
                <div>
                  Por favor ingrese el salario
                </div>
              </div>
            <label for="salario">Salario</label>
          </div>
        <h5>Modalidad</h5>
        <select class="form-select mb-3" aria-label="Default select example" 
        id="modalidad" name="modalidad" formControlName="modalidad">
            <option *ngFor="let dato of listaModalidades let i = index" value={{dato.nombre}}  >{{dato.nombre}}</option>
        </select>
        <h5>Ubicacion</h5>
        <div class="form-floating mb-3">
            <input type="text" class="form-control" 
              [class.is-invalid]="form.controls['ubicacion'].invalid && form.controls['ubicacion'].touched"
              id="ubicacion" placeholder="Ubicacion" name="ubicacion" formControlName="ubicacion">
              <div
                *ngIf="form.controls['ubicacion'].invalid && (form.controls['ubicacion'].dirty || form.controls['ubicacion'].touched)"
                class="invalid-feedback">
                <div>
                  Por favor ingrese la Ubicacion
                </div>
              </div>
            <label for="ubicacion">Ubicacion</label>
        </div>
        <h5>Detalles</h5>
        <div class="form-floating mb-3">
            <input type="text" class="form-control" 
              [class.is-invalid]="form.controls['detalles'].invalid && form.controls['detalles'].touched"
              id="detalles" placeholder="Detalles" name="detalles" formControlName="detalles">
              <div
                *ngIf="form.controls['detalles'].invalid && (form.controls['detalles'].dirty || form.controls['detalles'].touched)"
                class="invalid-feedback">
                <div>
                  Por favor ingrese los detalles
                </div>
              </div>
            <label for="detalles">Detalles</label>
        </div>
        <div class="d-flex flex-row w-100 justify-content-between mt-5">
            <button class="btn btn-primary h-25 mb-5" type="submit" (click)="cancelarOferta()" >Cancelar</button>
            <button class="btn btn-primary h-25 mb-5" type="submit" (click)="actualizarOferta(template)" >Actualizar Oferta</button>
        </div>
        <ng-template #template>
            <div class="modal-header">
                <h4 class="modal-title pull-left">Mensaje</h4>
                <button type="button" class="btn-close close pull-right" aria-label="Close" (click)="modalRef?.hide()">
                  <span aria-hidden="true" class="visually-hidden">&times;</span>
                </button>
              </div>
              <div class="modal-body">
                Se ha Actualizado la Oferta
              </div>
              <div class="d-flex w-100 justify-content-center align-items-center mb-3">
                <button type="button" class="btn btn-primary w-25" aria-label="Close" (click)="modalRef?.hide()">
                    OK  
                </button>
              </div>
              
        </ng-template>
    </form>
</div>

